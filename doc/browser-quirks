### Internet Explorer

# Newline rendering
IE renders a <br> inside a block level tag inside a contenteditable container as two lines. All other browsers render as one. Ex.

<div>A</div>
<div><br></div>
<div>B</div>

IE:
A


B

All other browsers
A

B

Other editors (Gmail composer, Etherpad), perhaps for this reason, does not include a break tag in an empty tag. Since Scribe would like to maintain identical markup between browsers, and also guarantee existence of a leaf within a line, our solution is to make <br> display:none in IE.

This creates the problem in that when you select the newline, the cursor is rendered in the line above. Not sure why this is the effect but the cause is certainly the display:none <br>. Thus on an empty line, we set the selection to be after the break tag. This creates the problem that when the user types, the entries are (correctly) made after the break. In all browsers a preceding break creates a newline. Ex:

<div>A</div>
<div><br>Test</div>
<div>B</div>

renders into

A

Test
B

To correct this problem we remove all breaks in the editor's update loop. This is fine in theory because <br> is technically unneeded in our markup (we add it to guarantee a leaf) and we can treat it as such. This theory is not rigorously tested.
